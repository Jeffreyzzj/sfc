<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="zijie.zeng.homework.study.dao.SfcStudentInfoDao">

    <!--插入操作-->
    <!--插入一个学生-->
    <insert id="insertStudentInfoByModel" parameterType="SfcStudentInfoModel">
        INSERT INTO student_info
          (qtalk,student_name,password,student_sex,student_content,student_phone,period_id,student_class)
        VALUES
          (#{qtalk},#{studentName},#{password},#{studentSex},#{studentContent},#{studentPhone},#{periodId},#{studentClass})
    </insert>

    <!--修改操作-->
    <!--根据你期次和qtalk修改一个学生-->
    <update id="updateStudentInfoByPeriodIdAndQtalk" parameterType="SfcStudentInfoModel">
        update student_info
        <set>
            <if test="studentName != null">
                student_name = #{studentName},
            </if>
            <if test="password != null">
                password = #{password},
            </if>
            <if test="studentSex != null">
                student_sex = #{studentSex},
            </if>
            <if test="studentContent != null">
                student_content = #{studentContent},
            </if>
            <if test="studentPhone != null">
                student_phone = #{studentPhone},
            </if>
            <if test="studentClass != null">
                student_class = #{studentClass},
            </if>
        </set>
        where qtalk = #{qtalk} and period_id = #{periodId}
    </update>


    <!--查询操作-->
    <!--根据期次和qtalk查询学生-->
    <select id="queryStudentInfoByPeriodIdAndQtalk" resultType="zijie.zeng.homework.study.model.SfcStudentInfoModel">
        SELECT
            student_info_id as id,
            qtalk as qtalk,
            student_name as studentName,
            password as password,
            student_sex as studentSex,
            student_content as studentContent,
            student_phone as studentPhone,
            period_id as periodId,
            student_class as studentClass
        FROM
            student_info
        WHERE
            period_id = #{periodId} and qtalk = #{qtalk}
    </select>
    <!--查询所有期次所有学生-->
    <select id="queryStudentInfoAll" resultType="zijie.zeng.homework.study.model.SfcStudentInfoModel">
        SELECT
            student_info_id as id,
            qtalk as qtalk,
            student_name as studentName,
            student_sex as studentSex,
            student_content as studentContent,
            student_phone as studentPhone,
            period_id as periodId,
            student_class as studentClass
        FROM
            student_info
    </select>
    <!--查询最新期次所有学生-->
    <select id="queryStudentInfoByPeriodId" parameterType="int" resultType="zijie.zeng.homework.study.model.SfcStudentInfoModel">
        SELECT
            student_info_id as id,
            qtalk as qtalk,
            student_name as studentName,
            student_sex as studentSex,
            student_content as studentContent,
            student_phone as studentPhone,
            period_id as periodId,
            student_class as studentClass
        FROM
            student_info
        where period_id = #{periodId}
    </select>
    <!--根据qtalk查询学生-->
    <select id="queryStudentInfoByQtalk" parameterType="String" resultType="zijie.zeng.homework.study.model.SfcStudentInfoModel">
        SELECT
            student_info_id as id,
            qtalk as qtalk,
            student_name as studentName,
            student_sex as studentSex,
            student_content as studentContent,
            student_phone as studentPhone,
            period_id as periodId,
            student_class as studentClass
        FROM
            student_info
        where qtalk = #{qtalk}
    </select>

</mapper>